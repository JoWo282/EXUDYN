cmake_minimum_required(VERSION 3.12.2)

project(cppsrc)

set(CMAKE_CONFIGURATION_TYPES "Debug;Release"
    CACHE STRING "Configuration types" FORCE)

add_executable(cppsrc
  ../src/Autogenerated/CLoadCoordinate.h
  ../src/Autogenerated/CLoadForceVector.h
  ../src/Autogenerated/CLoadMassProportional.h
  ../src/Autogenerated/CLoadTorqueVector.h
  ../src/Autogenerated/CMarkerBodyCable2DCoordinates.h
  ../src/Autogenerated/CMarkerBodyMass.h
  ../src/Autogenerated/CMarkerBodyPosition.h
  ../src/Autogenerated/CMarkerBodyRigid.h
  ../src/Autogenerated/CMarkerNodeCoordinate.h
  ../src/Autogenerated/CMarkerNodePosition.h
  ../src/Autogenerated/CMarkerNodeRigid.h
  ../src/Autogenerated/CNodeGenericData.h
  ../src/Autogenerated/CNodeGenericODE2.h
  ../src/Autogenerated/CNodePoint.h
  ../src/Autogenerated/CNodePoint2D.h
  ../src/Autogenerated/CNodePoint2DSlope1.h
  ../src/Autogenerated/CNodePointGround.h
  ../src/Autogenerated/CNodeRigidBody2D.h
  ../src/Autogenerated/CNodeRigidBodyEP.h
  ../src/Autogenerated/CObjectALEANCFCable2D.h
  ../src/Autogenerated/CObjectANCFCable2D.h
  ../src/Autogenerated/CObjectConnectorCartesianSpringDamper.h
  ../src/Autogenerated/CObjectConnectorCoordinate.h
  ../src/Autogenerated/CObjectConnectorCoordinateSpringDamper.h
  ../src/Autogenerated/CObjectConnectorDistance.h
  ../src/Autogenerated/CObjectConnectorSpringDamper.h
  ../src/Autogenerated/CObjectContactCircleCable2D.h
  ../src/Autogenerated/CObjectContactCoordinate.h
  ../src/Autogenerated/CObjectContactFrictionCircleCable2D.h
  ../src/Autogenerated/CObjectGround.h
  ../src/Autogenerated/CObjectJointALEMoving2D.h
  ../src/Autogenerated/CObjectJointPrismatic2D.h
  ../src/Autogenerated/CObjectJointSliding2D.h
  ../src/Autogenerated/CObjectMassPoint.h
  ../src/Autogenerated/CObjectMassPoint2D.h
  ../src/Autogenerated/CObjectRigidBody.h
  ../src/Autogenerated/CObjectRigidBody2D.h
  ../src/Autogenerated/CSolverStructures.h
  ../src/Autogenerated/MainLoadCoordinate.h
  ../src/Autogenerated/MainLoadForceVector.h
  ../src/Autogenerated/MainLoadMassProportional.h
  ../src/Autogenerated/MainLoadTorqueVector.h
  ../src/Autogenerated/MainMarkerBodyCable2DCoordinates.h
  ../src/Autogenerated/MainMarkerBodyMass.h
  ../src/Autogenerated/MainMarkerBodyPosition.h
  ../src/Autogenerated/MainMarkerBodyRigid.h
  ../src/Autogenerated/MainMarkerNodeCoordinate.h
  ../src/Autogenerated/MainMarkerNodePosition.h
  ../src/Autogenerated/MainMarkerNodeRigid.h
  ../src/Autogenerated/MainNodeGenericData.h
  ../src/Autogenerated/MainNodeGenericODE2.h
  ../src/Autogenerated/MainNodePoint.h
  ../src/Autogenerated/MainNodePoint2D.h
  ../src/Autogenerated/MainNodePoint2DSlope1.h
  ../src/Autogenerated/MainNodePointGround.h
  ../src/Autogenerated/MainNodeRigidBody2D.h
  ../src/Autogenerated/MainNodeRigidBodyEP.h
  ../src/Autogenerated/MainObjectALEANCFCable2D.h
  ../src/Autogenerated/MainObjectANCFCable2D.h
  ../src/Autogenerated/MainObjectConnectorCartesianSpringDamper.h
  ../src/Autogenerated/MainObjectConnectorCoordinate.h
  ../src/Autogenerated/MainObjectConnectorCoordinateSpringDamper.h
  ../src/Autogenerated/MainObjectConnectorDistance.h
  ../src/Autogenerated/MainObjectConnectorSpringDamper.h
  ../src/Autogenerated/MainObjectContactCircleCable2D.h
  ../src/Autogenerated/MainObjectContactCoordinate.h
  ../src/Autogenerated/MainObjectContactFrictionCircleCable2D.h
  ../src/Autogenerated/MainObjectGround.h
  ../src/Autogenerated/MainObjectJointALEMoving2D.h
  ../src/Autogenerated/MainObjectJointPrismatic2D.h
  ../src/Autogenerated/MainObjectJointRevolute2D.h
  ../src/Autogenerated/MainObjectJointSliding2D.h
  ../src/Autogenerated/MainObjectMassPoint.h
  ../src/Autogenerated/MainObjectMassPoint2D.h
  ../src/Autogenerated/MainObjectRigidBody.h
  ../src/Autogenerated/MainObjectRigidBody2D.h
  ../src/Autogenerated/MainSolver.h
  ../src/Autogenerated/pybind_manual_classes.h
  ../src/Autogenerated/Pybind_modules.h
  ../src/autogenerated/SimulationSettings.h
  ../src/autogenerated/SystemContainer.h
  ../src/Autogenerated/versionCpp.h
  ../src/Autogenerated/VisualizationSettings.h
  ../src/Autogenerated/VisuLoadCoordinate.h
  ../src/Autogenerated/VisuLoadForceVector.h
  ../src/Autogenerated/VisuLoadMassProportional.h
  ../src/Autogenerated/VisuLoadTorqueVector.h
  ../src/Autogenerated/VisuMarkerBodyCable2DCoordinates.h
  ../src/Autogenerated/VisuMarkerBodyMass.h
  ../src/Autogenerated/VisuMarkerBodyPosition.h
  ../src/Autogenerated/VisuMarkerBodyRigid.h
  ../src/Autogenerated/VisuMarkerNodeCoordinate.h
  ../src/Autogenerated/VisuMarkerNodePosition.h
  ../src/Autogenerated/VisuMarkerNodeRigid.h
  ../src/Autogenerated/VisuNodeGenericData.h
  ../src/Autogenerated/VisuNodeGenericODE2.h
  ../src/Autogenerated/VisuNodePoint.h
  ../src/Autogenerated/VisuNodePoint2D.h
  ../src/Autogenerated/VisuNodePoint2DSlope1.h
  ../src/Autogenerated/VisuNodePointGround.h
  ../src/Autogenerated/VisuNodeRigidBody2D.h
  ../src/Autogenerated/VisuNodeRigidBodyEP.h
  ../src/Autogenerated/VisuObjectALEANCFCable2D.h
  ../src/Autogenerated/VisuObjectANCFCable2D.h
  ../src/Autogenerated/VisuObjectConnectorCartesianSpringDamper.h
  ../src/Autogenerated/VisuObjectConnectorCoordinate.h
  ../src/Autogenerated/VisuObjectConnectorCoordinateSpringDamper.h
  ../src/Autogenerated/VisuObjectConnectorDistance.h
  ../src/Autogenerated/VisuObjectConnectorSpringDamper.h
  ../src/Autogenerated/VisuObjectContactCircleCable2D.h
  ../src/Autogenerated/VisuObjectContactCoordinate.h
  ../src/Autogenerated/VisuObjectContactFrictionCircleCable2D.h
  ../src/Autogenerated/VisuObjectGround.h
  ../src/Autogenerated/VisuObjectJointALEMoving2D.h
  ../src/Autogenerated/VisuObjectJointPrismatic2D.h
  ../src/Autogenerated/VisuObjectJointRevolute2D.h
  ../src/Autogenerated/VisuObjectJointSliding2D.h
  ../src/Autogenerated/VisuObjectMassPoint.h
  ../src/Autogenerated/VisuObjectMassPoint2D.h
  ../src/Autogenerated/VisuObjectRigidBody.h
  ../src/Autogenerated/VisuObjectRigidBody2D.h
  ../src/Graphics/GlfwClient.cpp
  ../src/Graphics/GlfwClient.h
  ../src/Graphics/GlfwClientText.h
  ../src/Graphics/GraphicsData.h
  ../src/Graphics/VisualizationSystem.cpp
  ../src/Graphics/VisualizationSystem.h
  ../src/Graphics/VisualizationSystemContainer.cpp
  ../src/Graphics/VisualizationSystemContainer.h
  ../src/Graphics/VisualizationSystemContainerBase.h
  ../src/Graphics/VisualizationSystemData.cpp
  ../src/Graphics/VisualizationSystemData.h
  ../src/Graphics/VisuNode.h
  ../src/Linalg/BasicLinalg.h
  ../src/Linalg/ConstSizeMatrix.h
  ../src/linalg/ConstSizeVector.h
  ../src/Linalg/Geometry.h
  ../src/Linalg/LinearSolver.cpp
  ../src/Linalg/LinearSolver.h
  ../src/linalg/LinkedDataVector.h
  ../src/Linalg/Matrix.cpp
  ../src/linalg/Matrix.h
  ../src/Linalg/ResizableMatrix.h
  ../src/linalg/ResizableVector.h
  ../src/linalg/SlimVector.h
  ../src/Linalg/Use_avx.h
  ../src/Linalg/Vector.cpp
  ../src/linalg/Vector.h
  ../src/Main/CData.h
  ../src/Main/CSystem.cpp
  ../src/Main/CSystem.h
  ../src/Main/CSystemData.h
  ../src/Main/CSystemState.h
  ../src/Main/MainObjectFactory.cpp
  ../src/Main/MainObjectFactory.h
  ../src/Main/MainSystem.cpp
  ../src/Main/MainSystem.h
  ../src/Main/MainSystemContainer.h
  ../src/Main/MainSystemData.h
  ../src/Main/MarkerData.h
  ../src/Main/OutputVariable.h
  ../src/Main/Stdoutput.cpp
  ../src/Main/Stdoutput.h
  ../src/Objects/CMarkerBodyCable2DCoordinates.cpp
  ../src/Objects/CMarkerBodyCable2DShape.cpp
  ../src/Objects/CMarkerBodyMass.cpp
  ../src/Objects/CMarkerBodyPosition.cpp
  ../src/Objects/CMarkerBodyRigid.cpp
  ../src/Objects/CMarkerNodeCoordinate.cpp
  ../src/Objects/CMarkerNodePosition.cpp
  ../src/Objects/CMarkerNodeRigid.cpp
  ../src/Objects/CNodeGenericData.cpp
  ../src/Objects/CNodeGenericODE2.cpp
  ../src/Objects/CNodePoint.cpp
  ../src/Objects/CNodePoint2D.cpp
  ../src/Objects/CNodePoint2DSlope1.cpp
  ../src/Objects/CNodePointGround.cpp
  ../src/Objects/CNodeRigidBody.cpp
  ../src/Objects/CNodeRigidBody2D.cpp
  ../src/Objects/CObjectALEANCFCable2D.cpp
  ../src/Objects/CObjectANCFCable2D.cpp
  ../src/Objects/CObjectANCFCable2DBase.h
  ../src/Objects/CObjectConnectorCartesianSpringDamper.cpp
  ../src/Objects/CObjectConnectorCoordinate.cpp
  ../src/Objects/CObjectConnectorCoordinateSpringDamper.cpp
  ../src/Objects/CObjectConnectorDistance.cpp
  ../src/Objects/CObjectConnectorSpringDamper.cpp
  ../src/Objects/CObjectContactCircleCable2D.cpp
  ../src/Objects/CObjectContactCoordinate.cpp
  ../src/Objects/CObjectContactFrictionCircleCable2D.cpp
  ../src/Objects/CObjectGround.cpp
  ../src/Objects/CObjectJointALEMoving2D.cpp
  ../src/Objects/CObjectJointPrismatic2D.cpp
  ../src/Objects/CObjectJointRevolute2D.cpp
  ../src/Objects/CObjectJointSliding2D.cpp
  ../src/Objects/CObjectMassPoint.cpp
  ../src/Objects/CObjectMassPoint2D.cpp
  ../src/Objects/CObjectRigidBody.cpp
  ../src/Objects/CObjectRigidBody2D.cpp
  ../src/Objects/VisuNodePoint.cpp
  ../src/Pymodules/PybindModule.cpp
  ../src/Pymodules/PybindTests.h
  ../src/Pymodules/PybindUtilities.h
  ../src/Solver/CSolver.cpp
  ../src/Solver/CSolver.h
  ../src/Solver/CSolverBase.cpp
  ../src/Solver/CSolverBase.h
  ../src/Solver/CSolverImplicitSecondOrder.cpp
  ../src/Solver/CSolverImplicitSecondOrder.h
  ../src/Solver/CSolverStatic.cpp
  ../src/Solver/CSolverStatic.h
  ../src/Solver/MainSolver.cpp
  ../src/Solver/MainSolverBase.cpp
  ../src/Solver/MainSolverBase.h
  ../src/Solver/StaticSolver.cpp
  ../src/solver/TimeIntegrationSolver.cpp
  ../src/solver/TimeIntegrationSolver.h
  ../src/system/BaseObject.h
  ../src/System/CLoad.cpp
  ../src/System/CLoad.h
  ../src/System/CMarker.h
  ../src/system/CMaterial.h
  ../src/System/CNode.cpp
  ../src/system/CNode.h
  ../src/system/CObject.h
  ../src/System/CObjectBody.cpp
  ../src/System/CObjectBody.h
  ../src/System/CObjectConnector.h
  ../src/System/MainLoad.h
  ../src/System/MainMarker.h
  ../src/System/MainMaterial.h
  ../src/System/MainNode.cpp
  ../src/System/MainNode.h
  ../src/System/MainObject.cpp
  ../src/System/MainObject.h
  ../src/System/MainObjectFactory.h
  ../src/tests/AllArrayUnitTests.h
  ../src/tests/AllMatrixUnitTests.h
  ../src/tests/AllVectorUnitTests.h
  ../src/tests/TemplatedVectorArrayUnitTests.h
  ../src/tests/UnitTestBase.cpp
  ../src/tests/UnitTestBase.h
  ../src/utilities/BasicDefinitions.h
  ../src/Utilities/BasicFunctions.cpp
  ../src/utilities/BasicFunctions.h
  ../src/utilities/BasicTraits.h
  ../src/utilities/ObjectContainer.h
  ../src/utilities/ReleaseAssert.h
  ../src/utilities/ResizableArray.h
  ../src/Utilities/RigidBodyMath.h
  ../src/utilities/SlimArray.h
)
# Additional include directories
set_property(TARGET cppsrc
  APPEND PROPERTY INCLUDE_DIRECTORIES
  $<$<CONFIG:Debug>:
    ${CMAKE_SOURCE_DIR}/src;
    ${CMAKE_SOURCE_DIR}/include/lest;
    ${CMAKE_SOURCE_DIR}/include/glfw;
    ${CMAKE_SOURCE_DIR}/include/glfw/deps;
    ${CMAKE_SOURCE_DIR}/include/pybind11;
    "C:\Program Files (x86)\Microsoft Visual Studio\Shared\Python36_86\include">
  $<$<CONFIG:Release>:
    ${CMAKE_SOURCE_DIR}/src;
    ${CMAKE_SOURCE_DIR}/include/lest;
    ${CMAKE_SOURCE_DIR}/include/glfw;
    ${CMAKE_SOURCE_DIR}/include/glfw/deps;
    ${CMAKE_SOURCE_DIR}/include/pybind11;
    "C:\Program Files (x86)\Microsoft Visual Studio\Shared\Python36_86\include">
)

# Preprocessor definitions
target_compile_definitions(cppsrc PRIVATE
  $<$<CONFIG:Debug>:_MBCS;_MBCS;\"$(INHERIT)\";_CRT_SECURE_NO_WARNINGS>
  $<$<CONFIG:Release>:_MBCS;_MBCS;\"$(INHERIT)\";_CRT_SECURE_NO_WARNINGS>
)

# SDL check
target_compile_options(cppsrc PRIVATE
  "$<$<CONFIG:Debug>:/sdl>"
  "$<$<CONFIG:Release>:/sdl>"
)

# Minimal rebuild
if (MSVC)
  target_compile_options(cppsrc PRIVATE
    "$<$<CONFIG:Debug>:/Gm->"
    "$<$<CONFIG:Release>:/Gm->"
  )
endif ()

# Precompiled header files
if (MSVC)
  target_compile_options(cppsrc PRIVATE
    ""
  )
endif ()
