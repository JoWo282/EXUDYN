\documentclass[11pt,a4paper]{book} %print
%\documentclass[12pt,a5paper,landscape]{book} %slides

%++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

\usepackage{amsmath}
\usepackage{pxfonts} 
%\usepackage{xcolor} %for colors
%\usepackage{floatrow} %?
\usepackage{graphicx} %\includegraphics
 
\usepackage{import}
\usepackage{hyperref}
\usepackage{longtable} %for tables in reference manual
\usepackage{mathtools} %for \prescript

\usepackage[latin1]{inputenc} %Achtung, dies ist die File-Encodierung (wird meist als ANSI angezeigt) und sollte nicht auf UTF-8 stehen (in Notepad++ umstellen!)
\usepackage[T1]{fontenc}

%\input{docincludes}
\usepackage{docincludes} %exudyn definitions
\usepackage{xcolor}
\usepackage{enumitem} %for adjustable indentation in itemize (leftmargin=...)
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
%configurations subscripts
\newcommand{\cIni}{_\mathrm{ini}} %initial
\newcommand{\cRef}{_\mathrm{ref}} %reference
\newcommand{\cCur}{_\mathrm{cur}} %current
\newcommand{\cVis}{_\mathrm{vis}} %visualization
\newcommand{\cSOS}{_\mathrm{start\;of\;step}}
\newcommand{\cConfig}{_\mathrm{config}} %any configuration

\newcommand{\body}{_\mathrm{ini}} %initial

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
%define standard 3-column tables with python name, symbol and description
\newcommand{\startTable}[3]{
\begin{center} \vspace{-12pt}
  \footnotesize
  \begin{longtable}{| p{5cm} | p{5cm} | p{6cm} |}
    \hline
    \bf #1 & \bf #2 & \bf #3 \\ \hline
}
\newcommand{\rowTable}[3]{#1 & #2 & #3 \\ \hline}
\newcommand{\finishTable}{
	  \end{longtable}
	\end{center}\vspace{-30pt}
}

%
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
%environment for flowcharts:
%\usepackage[latin1]{inputenc}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}
% Define block styles
\tikzstyle{decision} = [diamond, aspect=2, draw, fill=orange!30, 
    text width=8em, text badly centered, node distance=2.5cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, fill=blue!20, 
    text width=5em, text centered, rounded corners, minimum height=3em]
\tikzstyle{wideblock} = [rectangle, draw, fill=blue!20,
    text width=10em, text centered, rounded corners, minimum height=3em]
\tikzstyle{arrow} = [draw, -latex,  line width=1pt]
\tikzstyle{line} = [draw,  line width=1pt]
\tikzstyle{cloud} = [draw, ellipse,fill=red!20, node distance=5cm,
    minimum height=2em]
\tikzstyle{nodeBlock} = [draw, ellipse,fill=green!20, node distance=4cm,
    minimum height=2em]
\tikzstyle{objectBlock} = [draw, ellipse,fill=blue!20, node distance=4cm,
    minimum height=2em]
\tikzstyle{connectorBlock} = [draw, ellipse,fill=red!20, node distance=4cm,
    minimum height=2em]
\tikzstyle{markerBlock} = [draw, ellipse,fill=gray!20, node distance=4cm,
    minimum height=2em]
\tikzstyle{loadBlock} = [draw, ellipse,fill=orange!30, node distance=4cm,
    minimum height=2em]
%END: environment for flowcharts
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
% include python codes:
% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{9} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{9}  % for normal

% Custom colors
\usepackage{color}
\definecolor{deepblack}{rgb}{0,0,0}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0.4}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{commentgreen}{rgb}{0.5,0.6,0.5}

\usepackage{listings}

% Python style for highlighting example codes:
\newcommand\pythonstyle{\lstset{
language=Python,
basicstyle=\ttm,
otherkeywords={self},             % Add keywords here
keywordstyle=\ttb\color{deepblue},
emph={AddNode, AddObject, AddMarker, AddLoad, AddSensor, SystemContainer, 
AddSystem, Assemble, SimulationSettings,
StartRenderer, StopRenderer, GetNodeOutput,
TimeIntegrationSolve,__init__},          % Custom highlighting
emphstyle=\ttb\color{deepred},    % Custom highlighting style
stringstyle=\color{deepgreen},
commentstyle=\color{commentgreen},
frame=tb,                         % Any extra options here
showstringspaces=false,           % 
%numbers=left,										 %show line numbers
breaklines=true,									 %automatically breaks lines
numberstyle=\ttm    						% line number style
}}
%plain listing style:
\newcommand\plainlststyle{\lstset{
language=Python,
basicstyle=\ttm,
otherkeywords={self},             % Add keywords here
keywordstyle=\ttm,
emphstyle=\ttm,    % Custom highlighting style
stringstyle=\color{deepblack},
commentstyle=\color{deepblack},
frame=tb,                         % Any extra options here
showstringspaces=false,           % 
numbers=none,										 %show line numbers
breaklines=true,									 %automatically breaks lines
numberstyle=\ttm    						% line number style
}}
% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}


\definecolor{steelblue}{HTML}{307BD0}

\newcommand{\bigmr}[9]{\left[\!\! \begin{array}{ccc} \displaystyle #1 & \displaystyle #2 & \displaystyle #3 \vspace{0.3cm}\\ \displaystyle #4 & \displaystyle #5 & \displaystyle #6 \vspace{0.3cm}\\ \displaystyle #7 & \displaystyle #8 & \displaystyle #9  \end{array} \!\!\right]}

%++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
%page setup:
\renewcommand{\baselinestretch}{1.2} %larger linespace

\topmargin-1.3cm \headheight0cm \headsep1cm \topskip1cm \leftmargini0.5cm \textwidth17cm \textheight24.5cm \footskip1cm   \oddsidemargin-0.5cm \evensidemargin-0.5cm %adjust page size

\newcommand{\tabnewline}{\newline}

%+++++++++++++++++++++++++++++++++++++++
\begin{document}
\pagenumbering{roman} 
\setcounter{page}{0}
\pagestyle{empty}

\headsep3cm 
\begin{center}
%{\Large {\it Python based Multibody System Dynamics Simulation}}\vspace{1cm}\\
%{\Large {\it fleXible multibody system DYNAmics Parallelized with Python interface}}\vspace{1cm}\\
{\Large {\it Flexible Multibody Dynamics Systems with Python and C++}}\vspace{1cm}\\
{\Huge {\bf \codeName}} \vspace{0.5cm}\\
%{\small (flEXible mUltibody DYNamics )} \vspace{1cm}\\
{\Large \bf USER DOCUMENTATION} \vspace{1cm}\\
%\vspace{6cm}
\vspace{0.2cm}
\begin{center}
	\includegraphics[height=11cm]{intro2.png}\\
	{\tiny (mesh and FEM-model generated with NETGEN and NGsolve -- 647058 total coordinates)}
\end{center}
\vspace{0.2cm}
{\small \input{version}}\\
{\small CHECK section 'CHANGES' for changes from previous versions!!!\\}
\vspace{1.5cm}
University of Innsbruck, Department of Mechatronics, \today,\vspace{0.25cm}\\
Johannes Gerstmayr\vspace{2cm}
\end{center}

\newpage

\pagestyle{plain}
\headsep0.7cm 
%\headsep1cm 
%\chapter*{Contents}
%

%add additional entry for bookmarks in pdfs
\clearpage\phantomsection\pdfbookmark{\contentsname}{toc} 
\tableofcontents

%%++++++++++++++++++++++++++++++++++++++++++++++
\clearpage
\pagenumbering{arabic} 
\setcounter{page}{0}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\mysection{Getting Started}
\input{gettingStarted}

\mysection{Overview on \codeName }
\input{introduction}

\mysection{Tutorial}
\input{tutorial}


%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

\mysection{Python-C++ command interface} \label{sec_PCpp_command_interface}
This section lists the basic interface functions which can be used to set up a \codeName\ model in Python.

To import the module, just include the \codeName\ module in Python (for compatibility with examples and other users, we recommend to use the 'exu' abbreviation throughout)\footnote{note that there is a second module, called exudynFast, which does deactivates all range-, index- or memory allocation checks at the gain of higher speed (probably 30 percent in regular cases). To check which version you have, just type exu.\_\_doc\_\_ and you will see a note on 'exudynFast' in the exudynFast module.}:
\bi
  \item[] \texttt{import exudyn as exu}
\ei
In addition, you may work with a convenient interface for your items, therefore also always include the line
\bi
  \item[] \texttt{from exudyn.itemInterface import *}
\ei
The exudyn module will usually hold one SystemContainer, which is a class that is initialized by assigning a system container to a variable, usually denoted as 'SC':
\bi
  \item[] \texttt{SC = exu.SystemContainer()}
\ei
Furthermore, there are a couple of commands available directly in the \codeName\ module, given in the following subsections.
Regarding the {\bf (basic) module access}, functions are related to the '\texttt{exudyn = exu}' module, see these examples:
\begin{lstlisting}[language=Python, firstnumber=14]
  import exudyn as exu
  from exudyn.itemInterface import *
  SC = exu.SystemContainer()
  exu.InfoStat() #prints some statistics if available
  exu.Go() #creates a systemcontainer and main system
  nInvalid = exu.InvalidIndex() #the invalid index, depends on architecture and version
\end{lstlisting} \vspace{12pt}
%
Understanding the usage of functions for python object '\texttt{SystemContainer}' provided by \codeName, the following examples might help:
\begin{lstlisting}[language=Python, firstnumber=14]
  import exudyn as exu
  from exudyn.itemInterface import *
  SC = exu.SystemContainer()
  mbs = SC.AddSystem()
  nSys = SC.NumberOfSystems()
  print(nSys)
  SC.Reset()
\end{lstlisting} \vspace{12pt}
%

Many functions will work with node numbers ('\texttt{NodeIndex}'), object numbers ('\texttt{ObjectIndex}'), marker numbers ('\texttt{MarkerIndex}') and others. These numbers are special objects, which have been introduced in order to avoid mixing up, e.g., node and object numbers.
For example, the command \texttt{mbs.AddNode(...)} returns a \texttt{NodeIndex}. For these indices, the following rules apply:
\bi
	\item \texttt{mbs.Add[Node|Object|...](...)} returns a specific \texttt{NodeIndex}, \texttt{ObjectIndex}, ...
	\item You can create any item index, e.g., using \texttt{ni = NodeIndex(42)} or \texttt{oi = ObjectIndex(42)}
	\item You can convert any item index, e.g., NodeIndex \texttt{ni} into an integer number using \texttt{int(ni)}
	\item Still, you can use integers as initialization for item numbers, e.g., \\
	      \texttt{mbs.AddObject(MassPoint(nodeNumber=13, ...))}\\
				However, it must be a pure integer type.
	\item You can also print item indices, e.g., \texttt{print(ni)} as it converts to string by default
	\item If you are unsure about the type of an index, use \texttt{ni.GetTypeString()} to show the index type
\ei

\input{manual_interfaces}

\mysection{Python utility functions}
This chapter describes in every subsection the functions and classes of the utility modules. These modules help to create multibody systems with the EXUDYN core module. Functions are implemented in Python and can be easily changed, extended and also verified by the user. The are much slower than the functions available in the C++ core. Some matrix computations with larger matrices implemented in numpy and scipy, however, are parallelized and therefore very efficient.

Functions have been implemented, if not otherwise noted, by Johannes Gerstmayr.

\input{pythonUtilitiesDescription}


\mysection{Objects, nodes, markers, loads and sensors reference manual} \label{sec_item_reference_manual}
This chapter includes the reference manual for all objects (bodies/constraints), nodes, markers, loads and sensors.

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\mysubsection{Notation for item equations}
%
The following subscripts are used to define configurations of a quantity, e.g., $\xv$:
\bi
  \item $\xv\cConfig \ldots$ $\xv$ in any configuration
  \item $\xv\cRef \ldots$ $\xv$ in reference configuration, e.g., reference coordinates: $\cv\cRef$
  \item $\xv\cIni \ldots$ $\xv$ in initial configuration, e.g., initial displacements: $\uv\cIni$
  \item $\xv\cCur \ldots$ $\xv$ in current configuration
  \item $\xv\cVis \ldots$ $\xv$ in visualization configuration
  \item $\xv\cSOS \ldots$ $\xv$ in start of step configuration
\ei
As written in the introduction, the coordinates can have the types:
\bi
  \item ODE2 $\ldots$ second order differential equations coordinates
  \item ODE1 $\ldots$ first order differential equations coordinates; CURRENTLY NOT AVAILABLE
  \item AE $\ldots$ algebraic equations coordinates
  \item Data $\ldots$ data coordinates (history variables)
\ei
Time is usually defined as 'time' or $t$.
The cross product or vector product '$\times$' is often replaced by the skew symmetric matrix using the tilde '$\tilde{\;\;}$' symbol,
\be
  \av \times \bv = \tilde \av \, \bv = -\tilde \bv \, \av
\ee

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\noindent The following table contains the common notation: \vspace{-12pt}
\begin{center}
  \footnotesize
  \begin{longtable}{| p{5cm} | p{5cm} | p{6cm} |}
    \hline
    \bf python name (or description) & \bf symbol & \bf description \\ \hline
    displacement coordinates & $\qv = [q_0,\, \ldots,\, q_n]\tp$ & vector of $n$ displacement based coordinates in any configuration\\ \hline
    rotation coordinates & $\tpsi = [\psi_0,\, \ldots,\, \psi_\eta]\tp$ & vector of $\eta$ {\bf rotation based coordinates} in any configuration; this coordinates are added to reference rotation parameters to provide the current rotation parameters\\ \hline
    algebraic coordinates & $\zv = [z_0,\, \ldots,\, z_m]\tp$ & vector of $m$ algebraic coordinates if not Lagrange multipliers in any configuration\\ \hline
    Lagrange multipliers & $\tlambda = [\lambda_0,\, \ldots,\, \lambda_m]\tp$ & vector of $m$ Lagrange multipliers (=algebraic coordinates) in any configuration\\ \hline
    data coordinates & $\xv = [x_0,\, \ldots,\, x_l]\tp$ & vector of $l$ data coordinates in any configuration\\ \hline
%+++++++++++++++++++++++++++++++++++++++++++++++++++
    \hline %new part of table
		\bf python name: OutputVariable & \bf symbol & \bf description \\ \hline
    Coordinate & $\cv = [c_0,\, \ldots,\, c_n]\tp$ & coordinate vector with $n$ generalized coordinates $c_i$ in any configuration\\ \hline
    Coordinate\_t & $\dot \cv = [c_0,\, \ldots,\, c_n]\tp$ & time derivative of coordinate vector\\ \hline
    Displacement & $\LU{0}{\uv} = [u_0,\, u_1,\, u_2]\tp$ & global displacement vector with 3 displacement coordinates $u_i$ in any configuration; in 1D or 2D objects, some of there coordinates may be zero\\ \hline
    Rotation & $\ttheta = [\theta_0,\, \ldots,\, \theta_n]\tp$ & vector of {\bf rotation parameters} (e.g., Euler parameters, Tait Bryan angles, ...) with $n$ coordinates $\theta_i$ in any configuration\\ \hline
    RotationMatrix & $\LU{0b}{\Rot} = \mr{A_{00}}{A_{01}}{A_{02}} {A_{10}}{A_{11}}{A_{12}} {A_{20}}{A_{21}}{A_{22}}$ & a 3D rotation matrix, which transforms local (e.g., body $b$) to global coordinates (0): $\LU{0}{\xv} = \LU{0b}{\Rot} \LU{b}{\xv}$\\ \hline
    Position & $\LU{0}{\pv} = [p_0,\, p_1,\, p_2]\tp$ & global position vector with 3 position coordinates $p_i$ in any configuration\\ \hline
    Velocity & $\LU{0}{\vv} = \LU{0}{\dot \uv} = [v_0,\, v_1,\, v_2]\tp$ & global velocity vector with 3 displacement coordinates $v_i$ in any configuration\\ \hline
    AngularVelocity & $\LU{0}{\tomega} = [\omega_0,\, \ldots,\, \omega_2]\tp$ & global angular velocity vector with $3$ coordinates $\omega_i$ in any configuration\\ \hline
    Acceleration & $\LU{0}{\av} = \LU{0}{\ddot \uv} = [a_0,\, a_1,\, a_2]\tp$ & global acceleration vector with 3 displacement coordinates $a_i$ in any configuration\\ \hline
    AngularAcceleration & $\LU{0}{\talpha} = \LU{0}{\dot \tomega} = [\alpha_0,\, \ldots,\, \alpha_2]\tp$ & global angular acceleration vector with $3$ coordinates $\alpha_i$ in any configuration\\ \hline
%
    VelocityLocal & $\LU{b}{\vv} = [v_0,\, v_1,\, v_2]\tp$ & local (body-fixed) velocity vector with 3 displacement coordinates $v_i$ in any configuration\\ \hline
    AngularVelocityLocal & $\LU{b}{\tomega} = [\omega_0,\, \ldots,\, \omega_2]\tp$ & local (body-fixed) angular velocity vector with $3$ coordinates $\omega_i$ in any configuration\\ \hline
    Force & $\LU{0}{\fv} = [f_0,\, \ldots,\, f_2]\tp$ & vector of $3$ force components in global coordinates\\ \hline
    Torque & $\LU{0}{\ttau} = [\tau_0,\, \ldots,\, \tau_2]\tp$ & vector of $3$ torque components in global coordinates\\ \hline
%+++++++++++++++++++++++++++++++++++++++++++++++++++
		\hline %new part of table
    \bf python name: input to nodes, markers, etc. & \bf symbol & \bf description \\ \hline
    referenceCoordinates & $\cv\cRef = [c_0,\, \ldots,\, c_n]\cRef\tp = [c_{\mathrm{Ref},0},\, \ldots,\, c_{\mathrm{Ref},n}]\cRef\tp$ & $n$ coordinates of reference configuration (can usually be set at initialization of nodes)\\ \hline
    initialCoordinates & $\cv\cIni$ & initial coordinates with generalized or mixed displacement/rotation quantities (can usually be set at initialization of nodes)  \\ \hline
    localPosition & $\LU{b}{\pv} = [\LUR{b}{p}{0},\, \LUR{b}{p}{1},\, \LUR{b}{p}{2}]\tp$ & local (body-fixed) position vector with 3 position coordinates $p_i$ in any configuration; used for local position of markers, sensors, etc.\\ \hline
	  \end{longtable}
	\end{center}
%
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\mysubsubsection{Reference and current coordinates}
%
An important fact on the coordinates is upon the splitting of quantities (e.g. position, rotation parameters, etc.) into reference and current (initial/visualization/...) coordinates.
For the current position of a point node we have, e.g.,
\be
  \pv\cCur = \pv\cRef + \uv\cCur
\ee
The same holds, e.g., for rotation parameters,
\be
  \ttheta\cCur = \ttheta\cRef + \tpsi\cCur
\ee
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\mysubsubsection{Coordinate Systems}
%
\noindent The left indices provide information about the coordinate system, e.g.,
\be
  \LU{0}{\uv}
\ee
is the displacement vector in the global (inertial) coordinate systme $0$, while 
\be
  \LU{m1}{\uv}
\ee
represents the displacement vector in marker 1 ($m1$) coordinates. Typical coordinate systems:
\bi
  \item $\LU{0}{\uv}$ $\ldots$ global coordinates
  \item $\LU{b}{\uv}$ $\ldots$ body-fixed, local coordinates
  \item $\LU{m0}{\uv}$ $\ldots$ local coordinates of (the body or node of) marker $m0$
  \item $\LU{m1}{\uv}$ $\ldots$ local coordinates of (the body or node of) marker $m1$
\ei
To transform the local coordinates $\LU{m0}{\uv}$ of marker 0 into global coordinates $\LU{0}{\xv}$, we use
\be
  \LU{0}{\uv} = \LU{0,m0}{\Rot} \LU{m0}{\uv}
\ee
in which $\LU{0,m0}{\Rot}$ is the transformation matrix of (the body or node of) the underlying marker 0.

\input{itemDefinition}

\newpage

\mysubsection{GraphicsData}
Some items may include a 'graphicsData' dictionary structure. 
GraphicsData dictionaries can be created with functions provided in the utilities module \texttt{exudynGraphicsDataUtilities.py}.
GraphicsData contains a list of graphicsData items, i.e.\ graphicsData = [graphicsItem1, graphicsItem2, ...]. Every single graphicsItem may be defined as one of the following structures using a specific 'type':
\begin{center}
  \footnotesize
  \begin{longtable}{| p{3cm} | p{2cm} | p{3cm} | p{7.5cm} |} 
	\hline
  \bf Name & \bf type & \bf default value & \bf description \\ \hline
%
%LINE
	\multicolumn{3}{l}{\parbox{8cm}{\bf type = 'Line': }} & \multicolumn{1}{l}{\parbox{7.5cm}{\it draws a polygonal line between all specified points}}\\ \hline
  color & list & [0,0,0,1] & list of 4 floats to define RGB-color and transparency\\ \hline
  data & list &  mandatory & list of float triples of x,y,z coordinates of the line floats to define RGB-color and transparency; Example: data=[0,0,0, 1,0,0, 1,1,0, 0,1,0, 0,0,0] ... draws a rectangle with side length 1\\ \hline
%
%CIRCLE
	\multicolumn{3}{l}{\parbox{8cm}{\bf type = 'Circle': }} & \multicolumn{1}{l}{\parbox{7.5cm}{\it draws a circle with center point, normal (defines plane of circle) and radius}}\\ \hline
  color & list & [0,0,0,1] & list of 4 floats to define RGB-color and transparency\\ \hline
  radius & float & mandatory & radius\\ \hline
  position & list & mandatory & list of float triples of x,y,z coordinates of center point of the circle\\ \hline
  normal & list & [0,0,1] & list of float triples of x,y,z coordinates of normal to the plane of the circle; the default value gives a circle in the ($x,y$)-plane\\ \hline
%TEXT
	\multicolumn{3}{l}{\parbox{8cm}{\bf type = 'Text': }} & \multicolumn{1}{l}{\parbox{7.5cm}{\it places the given text at position}}\\ \hline
  color & list & [0,0,0,1] & list of 4 floats to define RGB-color and transparency\\ \hline
  text & string & mandatory & text to be displayed\\ \hline
  position & list & mandatory & list of float triples of [x,y,z] coordinates of the left upper position of the text; e.g.\ position=[20,10,0] \\ \hline
%TRIANGLELIST
	\multicolumn{3}{l}{\parbox{8cm}{\bf type = 'TriangleList': }} & \multicolumn{1}{l}{\parbox{7.5cm}{\it draws a flat triangle mesh for given points and connectivity}}\\ \hline
  points & list & mandatory & list [x0,y0,z0, x1,y1,z1, ...] containing $n \times 3$ floats (grouped x0,y0,z0, x1,y1,z1, ...) to define x,y,z coordinates of points, $n$ being the number of points (=vertices)\\ \hline
  colors & list & empty & list [R0,G0,B0,A0, R1,G2,B1,A1, ...] containing $n \times 4$ floats to define RGB-color and transparency A, where $n$ must be according to number of points; if field 'colors' does not exist, default colors will be used\\ \hline
  normals & list & empty & list [n0x,n0y,n0z, ...] containing $n \times 3$ floats to define normal direction of triangles per point, where $n$ must be according to number of points; if field 'normals' does not exist, default normals [0,0,0] will be used\\ \hline
  triangles & list &  mandatory & list [T0point0, T0point1, T0point2, ...] containing $n_{trig} \times 3$ floats to define point indices of each vertex of the triangles (=connectivity); point indices start with index 0; the maximum index must be $\le$ points.size()\\ \hline
\end{longtable}
%
\end{center}
%
Examples of \texttt{GraphicsData} can be found in the Python examples and in \texttt{exudynUtilities.py}.

\mysection{\codeName\ Settings}
This section includes the reference manual for settings which are available in the python interface, e.g.\ simulation settings, visualization settings, and others.

\input{interfaces}

\mysection{3D Graphics Visualization}

The 3D graphics visualization window is kept simple, but useful to see the animated results of the multibody system.

\mysubsection{Mouse input}
The following table includes the mouse functions. 

\begin{center}
  \footnotesize
  \begin{longtable}{| p{4cm} | p{4cm} | p{8cm} |} 
	\hline
  \bf Button & action & \bf remarks \\ \hline
  \bf left mouse button & move model & keep left mouse button pressed to move the model in the current x/y plane\\ \hline
  \bf right mouse button & rotate model & keep right mouse button pressed to rotate model around current current $X_1$/$X_2$ axes\\ \hline
  \bf mouse wheel & zoom & use mouse wheel to zoom (on touch screens 'pinch-to-zoom' might work as well) \\ \hline
  \end{longtable}
\end{center}


\mysubsection{Keyboard input}
The following table includes the keyboard shortcuts available in the window. 

\begin{center}
  \footnotesize
  \begin{longtable}{| p{4cm} | p{4cm} | p{8cm} |} 
	\hline
  \bf Key(s) & action & \bf remarks \\ \hline
  \bf 1,2,3,4 or 5 & visualization update speed & the entered digit controls the visualization update, which can be changed from 1=1 update per 20ms to 5=1 update per 100s\\ \hline
  \bf '.' or KEYPAD + & zoom in & zoom one step into scene (additionally press CTRL to perform small zoom step)\\ \hline
  \bf ',' or KEYPAD - & zoom out & zoom one step out of scene (additionally press CTRL to perform small zoom step)\\ \hline
	%
  %\bf 0 or KEYPAD 0& reset rotation & set rotation such that the scene is oriented in the x/y plane \\ \hline
  \bf CTRL+1 or SHIFT+CTRL+1& change view& set view in 1/2-plane (+SHIFT: view from opposite side) \\ \hline
  \bf CTRL+2 or SHIFT+CTRL+2& change view& set view in 1/3-plane (+SHIFT: view from opposite side) \\ \hline
  \bf CTRL+3 or SHIFT+CTRL+3& change view& set view in 2/3-plane (+SHIFT: view from opposite side) \\ \hline
  \bf CTRL+4 or SHIFT+CTRL+4& change view& set view in 2/1-plane (+SHIFT: view from opposite side) \\ \hline
  \bf CTRL+5 or SHIFT+CTRL+5& change view& set view in 3/1-plane (+SHIFT: view from opposite side) \\ \hline
  \bf CTRL+6 or SHIFT+CTRL+6& change view& set view in 3/2-plane (+SHIFT: view from opposite side) \\ \hline

  \bf A & zoom all & set zoom such that the whole scene is visible \\ \hline
  \bf CURSOR UP, DOWN, ... & move scene& use coursor keys to move the scene up, down, left, and right (use CTRL for small movements)\\ \hline
  \bf KEYPAD 2/8,4/6,1/9 & rotate scene & about 1, 2 and 3-axis (use CTRL for small rotations) \\ \hline
	%
  \bf C & show/hide connectors & pressing this key switches the visibility of connectors \\ \hline
  \bf CTRL+C & show/hide connector numbers & pressing this key switches the visibility of connector numbers \\ \hline
  %
	\bf B & show/hide bodies & pressing this key switches the visibility of bodies \\ \hline
  \bf CTRL+B & show/hide body numbers & pressing this key switches the visibility of body numbers \\ \hline
  %
	\bf L & show/hide loads & pressing this key switches the visibility of loads \\ \hline
  \bf CTRL+L & show/hide load numbers & pressing this key switches the visibility of load numbers \\ \hline
  %
	\bf M & show/hide markers & pressing this key switches the visibility of markers \\ \hline
  \bf CTRL+M & show/hide marker numbers & pressing this key switches the visibility of marker numbers \\ \hline
  %
	\bf N & show/hide nodes & pressing this key switches the visibility of nodes \\ \hline
  \bf CTRL+N & show/hide node numbers & pressing this key switches the visibility of node numbers \\ \hline
  %
	\bf S & show/hide sensors & pressing this key switches the visibility of sensors \\ \hline
  \bf CTRL+S & show/hide sensor numbers & pressing this key switches the visibility of sensor numbers \\ \hline
  %
	\bf Q & stop simulation & simulation is stopped and cannot be recovered \\ \hline
	%
	\bf X & execute command & open dialog to enter a python command (in global python scope); dialog may appear behind the visualization window! User errors may lead to crash -- be careful! 
	Examples: '\texttt{print(mbs)}', '\texttt{x=5}', '\texttt{mbs.GetObject(0)}',etc.\\ \hline
	%
	\bf V & visualization settings & open dialog to modify visualization settings; dialog may appear behind the visualization window! \\ \hline
	%
  \bf ESCAPE & close render window & stops the simulation and closes the render window \\ \hline
  \bf SPACE & continue simulation & if simulation is paused, it can be continued by pressing space; use SHIFT+SPACE to continuously activate 'continue simulation'\\ \hline
  \end{longtable}
\end{center}


\mysection{Solver}
\input{solver}



\clearpage

\mysection{References} 
coming soon!

\mysection{License} 

%\verbatiminput{././LICENSE.txt}
%\input{../../licenseEXUDYN.txt}
%\lstinputlisting{..\..\LICENSE.txt}
\plainlststyle
\lstinputlisting[breaklines=true, basicstyle=\ttm]{../../LICENSE.txt}
\end{document}


